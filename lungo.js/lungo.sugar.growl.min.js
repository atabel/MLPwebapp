LUNGO.Sugar.Growl=function(d,k){var n=[],g={BODY:"body",GROWL:".growl",MODAL:".growl .modal",NOTIFY:".growl .notify",MODAL_HREF:".growl .modal a"},e={VISIBLE:"visible",SHOW:"show",WORKING:"working",INPUT:"input"},p=function(){o(g.MODAL);o(g.NOTIFY);setTimeout(function(){d.dom(g.GROWL).style("display","none")},300)},j=function(a){var b=d.dom(g.GROWL);b.style("display")==="none"&&b.show();a&&b.addClass("modal")},q=function(a){var b=d.dom(g.MODAL);b.removeClass(e.SHOW);b.removeClass(e.INPUT);a?b.addClass(e.WORKING):
b.removeClass(e.WORKING);return b},r=function(a){for(var b="",c=0,f=a.length;c<f;c++){b=b;var h="growl_option_"+c;h=h!==k?'id="'+h+'"':"";b=b+('<a href="#" '+h+' class="button '+a[c].color+'"><span class="icon '+a[c].icon+'"></span>'+a[c].name+"</a>")}return b},l=function(a,b){if(a!=k&&a!=0){if(b===k)b="LUNGO.Sugar.Growl.hide()";setTimeout(b,a*1E3)}},o=function(a){a=d.dom(a);a.hasClass(e.SHOW)&&a.removeClass(e.SHOW)};d.dom(g.BODY).append('<div class="growl"><div class="modal"></div><div class="notify"></div></div>');
(function(){d.dom(g.NOTIFY).bind("click",function(){d.dom(g.NOTIFY).removeClass(e.SHOW)});d.dom(".growl .modal.input a, .growl .modal .close").tap(function(a){if(d.dom(this).attr("id")){id=d.dom(this).attr("id").replace(/growl_option_/g,"");setTimeout(n[id].callback,100)}else{a.preventDefault();p();return false}})})();return{show:function(a,b,c,f,h,m){j(true);var i=q(f);i.html('<span class="icon '+c+'"></span><strong>'+a+"</strong><small>"+b+"</small>");setTimeout(function(){i.addClass(e.SHOW)},100);
l(h,m)},hide:p,notify:function(a,b,c,f,h,m){j(false);var i=d.dom(g.NOTIFY);i.addClass(f||"info");i.html('<span class="icon '+c+'"></span><strong>'+a+"</strong><br/><small>"+b+"</small>");setTimeout(function(){i.addClass(e.SHOW)},300);l(h,m)},option:function(a,b){j(true);n=b;var c=r(b),f=d.dom(g.MODAL);f.removeClass(e.WORKING).removeClass(e.SHOW);f.addClass("input").html("<strong>"+a+"</strong>"+c).show();setTimeout(function(){f.addClass("show")},100)},html:function(a,b,c){a+=b?'<span class="icon close"></span>':
"";j(true);var f=q(false);f.html(a).addClass("url");setTimeout(function(){f.addClass(e.SHOW)},100);l(0,c)}}}(LUNGO);
