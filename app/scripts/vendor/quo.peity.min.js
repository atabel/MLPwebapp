(function(e,b){var d=e.fn.peity=function(g,f){if(b.createElement("canvas").getContext){this.each(function(){e(this).on("change",function(){var i=e.extend({},d.defaults[g],f);var h=this;e.each(i,function(k,l){if(typeof l==="function"){i[k]=l.call(h)}});var j=e(this).html();d.graphers[g].call(this,i);e(this).trigger("chart:changed",j)}).trigger("change")})}return this};d.graphers={};d.defaults={};d.add=function(f,g,h){d.graphers[f]=h;d.defaults[f]=g};var a=window.devicePixelRatio||1;function c(i,f){var g=b.createElement("canvas");g.setAttribute("width",i*a);g.setAttribute("height",f*a);if(a!=1){var h="width:"+i+"px;height:"+f+"px";g.setAttribute("style",h)}return g}d.add("pie",{colours:["#FFF4DD","#FF9900"],delimiter:"/",diameter:16},function(f){var k=e(this);var p=k.text().split(f.delimiter);var m=parseFloat(p[0]);var l=parseFloat(p[1]);var o=-Math.PI/2;var n=(m/l)*Math.PI*2;var i=c(f.diameter,f.diameter);var h=i.getContext("2d");var g=i.width/2;h.beginPath();h.moveTo(g,g);h.arc(g,g,g,n+o,(n==0)?Math.PI*2:o,false);h.fillStyle=f.colours[0];h.fill();h.beginPath();h.moveTo(g,g);h.arc(g,g,g,o,n+o,false);h.fillStyle=f.colours[1];h.fill();var j=k.html();j="<span style='display:none;'>"+j+"</span>";k.html(j).append(i)});d.add("line",{colour:"#c6d9fd",strokeColour:"#4d89f9",strokeWidth:1,delimiter:",",height:16,max:null,min:0,width:32},function(g){var p=e(this);var k=c(g.width,g.height);var u=p.text().split(g.delimiter);if(u.length==1){u.push(u[0])}var r=Math.max.apply(Math,u.concat([g.max]));var m=Math.min.apply(Math,u.concat([g.min]));var j=k.getContext("2d");var h=k.width;var v=k.height;var f=h/(u.length-1);var o=v/(r-m);var t=[];var n;j.beginPath();j.moveTo(0,v+(m*o));for(n=0;n<u.length;n++){var s=n*f;var q=v-(o*(u[n]-m));t.push({x:s,y:q});j.lineTo(s,q)}j.lineTo(h,v+(m*o));j.fillStyle=g.colour;j.fill();if(g.strokeWidth){j.beginPath();j.moveTo(0,t[0].y);for(n=0;n<t.length;n++){j.lineTo(t[n].x,t[n].y)}j.lineWidth=g.strokeWidth*a;j.strokeStyle=g.strokeColour;j.stroke()}var l=p.html();l="<span style='display:none;'>"+l+"</span>";p.html(l).append(k)});d.add("bar",{colour:"#4D89F9",delimiter:",",height:16,max:null,min:0,width:32},function(h){var q=e(this);var u=q.text().split(h.delimiter);var s=Math.max.apply(Math,u.concat([h.max]));var n=Math.min.apply(Math,u.concat([h.min]));var l=c(h.width,h.height);var k=l.getContext("2d");var j=l.width;var v=l.height;var p=v/(s-n);var g=a/2;var f=(j+g)/u.length;k.fillStyle=h.colour;for(var o=0;o<u.length;o++){var t=o*f;var r=v-(p*(u[o]-n));k.fillRect(t,r,f-g,p*u[o])}var m=q.html();m="<span style='display:none;'>"+m+"</span>";q.html(m).append(l)})})(Quo,document);